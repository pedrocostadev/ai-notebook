## 2026-01-08 - Follow-up Questions Buttons

- What was implemented:
  - Converted follow-up questions from a simple bulleted list to clickable buttons
  - Added `onFollowUpClick` callback prop to `MessageList` component
  - Styled buttons with pill/chip design using Tailwind (rounded-full, primary colors with transparency)
  - Wired up ChatContainer to pass `sendMessage` as the click handler
  - Clicking a follow-up question now sends it as a new user message

- Files changed:
  - `src/renderer/src/components/chat/MessageList.tsx` - Added prop, replaced `<li>` with `<button>` elements
  - `src/renderer/src/components/chat/ChatContainer.tsx` - Passed `onFollowUpClick={sendMessage}` prop

- **Learnings:**
  - The `sendMessage` function from `useChat` hook handles optimistic UI updates automatically
  - The optional chaining `onFollowUpClick?.(q)` pattern is clean for optional callbacks
  - Follow-up questions were already stored in `message.metadata.followUpQuestions` array
  - Using `text-left` on buttons ensures longer questions wrap properly

---

## 2026-01-08 - Empty Chat Illustration

- What was implemented:
  - Added empty state display when chat has no messages
  - Used `MessageSquareText` icon from lucide-react as visual illustration
  - Added helpful text prompting user to start conversation or use slash commands
  - Empty state shows only when: no messages, not streaming, no command loading

- Files changed:
  - `src/renderer/src/components/chat/MessageList.tsx` - Added isEmpty check and empty state UI

- **Learnings:**
  - The ternary conditional inside JSX requires careful bracket/parenthesis matching
  - Reusing the same icon styling pattern (h-16 w-16 opacity-20) as "No PDF Selected" keeps consistency
  - Using `py-16` instead of `h-full` works better for centering in ScrollArea contexts

---

## 2026-01-08 - Welcome Screen Onboarding

- What was implemented:
  - Created new `WelcomeScreen` component for first-run experience
  - Full-screen welcome UI with app icon, title, and description
  - API key input with Enter key support and link to Google AI Studio
  - Model selection dropdown with default pre-selected
  - "Done" button validates API key before allowing to proceed
  - Auto-closes and shows main interface once valid key is saved
  - Covers both onboarding PRD stories in one implementation

- Files changed:
  - `src/renderer/src/components/settings/WelcomeScreen.tsx` - New component
  - `src/renderer/src/App.tsx` - Import WelcomeScreen, render on first run instead of SettingsDialog

- **Learnings:**
  - Conditional early return pattern (`if (!hasApiKey) return <WelcomeScreen />`) cleanly separates first-run from normal flow
  - The existing useSettings hook already had all needed methods (saveApiKey, setModel)
  - Removed the auto-open SettingsDialog useEffect - full-screen component is cleaner for onboarding
  - Added helpful link to Google AI Studio for getting API keys

---

## 2026-01-08 - Key Concepts Page References

- What was implemented:
  - Modified `generateChapterConcepts` to accept chunks with page information instead of plain text
  - Created `ChunkWithPage` interface to type chunk data with `pageStart`/`pageEnd`
  - Formatted input text with `[Page X]` or `[Pages X-Y]` markers before each chunk
  - Updated AI system prompt to instruct extraction of `pageEstimate` based on page markers
  - Updated job-queue to pass chunk data with page info to concept generator

- Files changed:
  - `src/main/services/content-generator.ts` - Changed function signature, added page marker formatting
  - `src/main/services/job-queue.ts` - Pass chunks with page info instead of concatenated text

- **Learnings:**
  - The `pageEstimate` field already existed in `ConceptQuoteSchema` but was never populated
  - The UI in `ChatContainer.tsx` already handled displaying `pageEstimate` (line 189)
  - The key insight was that page info was lost when chunks were joined into plain text
  - Page markers in the prompt (`[Page X]`) allow the AI to associate quotes with page numbers
  - Chunk data in database includes `page_start` and `page_end` from PDF processing

---
